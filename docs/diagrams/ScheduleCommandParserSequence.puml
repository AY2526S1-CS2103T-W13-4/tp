@startuml
' Schedule command parsing sequence
' Mirrors code in
' - src/main/java/seedu/address/logic/parser/AddressBookParser.java
' - src/main/java/seedu/address/logic/parser/ScheduleCommandParser.java
' - src/main/java/seedu/address/logic/parser/ParserUtil.java

skinparam monochrome true
skinparam shadowing false
skinparam sequenceArrowThickness 1
skinparam sequenceParticipant underline

actor User as U
participant "Logic\\n(AddressBookParser)" as ABP
participant "ScheduleCommandParser" as SCP
participant "ParserUtil" as PU
participant Lesson as L
participant "ScheduleCommand" as SC <<command>>

U -> ABP : input "schedule 1 start/... end/... date/... sub/..."
ABP -> SCP : new ScheduleCommandParser()
ABP -> SCP : parse(arguments)

activate SCP
SCP -> SCP : tokenize args by prefixes
SCP -> PU : requireSingleIndex(preamble, usage)
PU --> SCP : index token
SCP -> SCP : ensure required prefixes present
SCP -> SCP : verify no duplicate prefixes
SCP -> PU : parseIndex(index token)
PU --> SCP : Index
SCP -> SCP : validate start time format & value
SCP -> SCP : validate end time format & value
SCP -> SCP : validate date format & value
SCP -> SCP : ensure end time after start time
SCP -> L : new Lesson(start, end, date, subject, false)
L --> SCP : Lesson
SCP -> SC : new ScheduleCommand(index, lesson)
SC --> ABP : ScheduleCommand

return command
@enduml
