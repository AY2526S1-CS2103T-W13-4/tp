@startuml
' Edit command parsing sequence
' Mirrors code in
' - src/main/java/seedu/address/logic/parser/AddressBookParser.java
' - src/main/java/seedu/address/logic/parser/EditCommandParser.java
' - src/main/java/seedu/address/logic/parser/ParserUtil.java

skinparam monochrome true
skinparam shadowing false
skinparam sequenceArrowThickness 1
skinparam sequenceParticipant underline

actor User as U
participant "Logic\\n(AddressBookParser)" as ABP
participant "EditCommandParser" as ECP
participant "ParserUtil" as PU
participant "EditPersonDescriptor" as EPD
participant "EditCommand" as EC <<command>>

U -> ABP : input "edit 1 n/... p/... ..."
ABP -> ECP : new EditCommandParser()
ABP -> ECP : parse(arguments)

activate ECP
ECP -> ECP : tokenize args by prefixes
ECP -> PU : requireSingleIndex(preamble, usage)
PU --> ECP : index token
ECP -> ECP : ensure at least one editable field present
ECP -> PU : parseIndex(index token)
PU --> ECP : Index
ECP -> ECP : verify no duplicate single-use prefixes
ECP -> EPD : new EditPersonDescriptor()
ECP -> EPD : set optional name/phone/email/address (via ParserUtil)
ECP -> PU : parseTags(all t/)
PU --> ECP : Set<Tag>
ECP -> EPD : setTags(...)
ECP -> PU : parseAttributes(all attr/)
PU --> ECP : Set<Attribute>
ECP -> EPD : setAttributes(...)
ECP -> ECP : ensure descriptor edits at least one field
ECP -> EC : new EditCommand(index, descriptor copy)
EC --> ABP : EditCommand

return command
@enduml
